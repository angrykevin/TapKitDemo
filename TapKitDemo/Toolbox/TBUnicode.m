//
//  TBUnicode.m
//  TapKitDemo
//
//  Created by Kevin on 5/8/14.
//  Copyright (c) 2014 Telligenty. All rights reserved.
//

#import "TBUnicode.h"

typedef unsigned short  uc_char;
typedef unsigned int    uc_uint;
typedef int             uc_sint;
typedef const char*     uc_string;

typedef struct {
  uc_uint begin;
  uc_uint end;
  uc_string name;
} uc_block;

static uc_block uc_block_list[] = {
  {0x00000000, 0x0000007F, "TB_UNICODE_BLOCK_BASIC_LATIN"},
  {0x00000080, 0x000000FF, "TB_UNICODE_BLOCK_LATIN_1_SUPPLEMENT"},
  {0x00000100, 0x0000017F, "TB_UNICODE_BLOCK_LATIN_EXTENDED_A"},
  {0x00000180, 0x0000024F, "TB_UNICODE_BLOCK_LATIN_EXTENDED_B"},
  {0x00000250, 0x000002AF, "TB_UNICODE_BLOCK_IPA_EXTENSIONS"},
  {0x000002B0, 0x000002FF, "TB_UNICODE_BLOCK_SPACING_MODIFIER_LETTERS"},
  {0x00000300, 0x0000036F, "TB_UNICODE_BLOCK_COMBINING_DIACRITICAL_MARKS"},
  {0x00000370, 0x000003FF, "TB_UNICODE_BLOCK_GREEK_AND_COPTIC"},
  {0x00000400, 0x000004FF, "TB_UNICODE_BLOCK_CYRILLIC"},
  {0x00000500, 0x0000052F, "TB_UNICODE_BLOCK_CYRILLIC_SUPPLEMENT"},
  {0x00000530, 0x0000058F, "TB_UNICODE_BLOCK_ARMENIAN"},
  {0x00000590, 0x000005FF, "TB_UNICODE_BLOCK_HEBREW"},
  {0x00000600, 0x000006FF, "TB_UNICODE_BLOCK_ARABIC"},
  {0x00000700, 0x0000074F, "TB_UNICODE_BLOCK_SYRIAC"},
  {0x00000750, 0x0000077F, "TB_UNICODE_BLOCK_ARABIC_SUPPLEMENT"},
  {0x00000780, 0x000007BF, "TB_UNICODE_BLOCK_THAANA"},
  {0x000007C0, 0x000007FF, "TB_UNICODE_BLOCK_NKO"},
  {0x00000800, 0x0000083F, "TB_UNICODE_BLOCK_SAMARITAN"},
  {0x00000840, 0x0000085F, "TB_UNICODE_BLOCK_MANDAIC"},
  {0x000008A0, 0x000008FF, "TB_UNICODE_BLOCK_ARABIC_EXTENDED_A"},
  {0x00000900, 0x0000097F, "TB_UNICODE_BLOCK_DEVANAGARI"},
  {0x00000980, 0x000009FF, "TB_UNICODE_BLOCK_BENGALI"},
  {0x00000A00, 0x00000A7F, "TB_UNICODE_BLOCK_GURMUKHI"},
  {0x00000A80, 0x00000AFF, "TB_UNICODE_BLOCK_GUJARATI"},
  {0x00000B00, 0x00000B7F, "TB_UNICODE_BLOCK_ORIYA"},
  {0x00000B80, 0x00000BFF, "TB_UNICODE_BLOCK_TAMIL"},
  {0x00000C00, 0x00000C7F, "TB_UNICODE_BLOCK_TELUGU"},
  {0x00000C80, 0x00000CFF, "TB_UNICODE_BLOCK_KANNADA"},
  {0x00000D00, 0x00000D7F, "TB_UNICODE_BLOCK_MALAYALAM"},
  {0x00000D80, 0x00000DFF, "TB_UNICODE_BLOCK_SINHALA"},
  {0x00000E00, 0x00000E7F, "TB_UNICODE_BLOCK_THAI"},
  {0x00000E80, 0x00000EFF, "TB_UNICODE_BLOCK_LAO"},
  {0x00000F00, 0x00000FFF, "TB_UNICODE_BLOCK_TIBETAN"},
  {0x00001000, 0x0000109F, "TB_UNICODE_BLOCK_MYANMAR"},
  {0x000010A0, 0x000010FF, "TB_UNICODE_BLOCK_GEORGIAN"},
  {0x00001100, 0x000011FF, "TB_UNICODE_BLOCK_HANGUL_JAMO"},
  {0x00001200, 0x0000137F, "TB_UNICODE_BLOCK_ETHIOPIC"},
  {0x00001380, 0x0000139F, "TB_UNICODE_BLOCK_ETHIOPIC_SUPPLEMENT"},
  {0x000013A0, 0x000013FF, "TB_UNICODE_BLOCK_CHEROKEE"},
  {0x00001400, 0x0000167F, "TB_UNICODE_BLOCK_UNIFIED_CANADIAN_ABORIGINAL_SYLLABICS"},
  {0x00001680, 0x0000169F, "TB_UNICODE_BLOCK_OGHAM"},
  {0x000016A0, 0x000016FF, "TB_UNICODE_BLOCK_RUNIC"},
  {0x00001700, 0x0000171F, "TB_UNICODE_BLOCK_TAGALOG"},
  {0x00001720, 0x0000173F, "TB_UNICODE_BLOCK_HANUNOO"},
  {0x00001740, 0x0000175F, "TB_UNICODE_BLOCK_BUHID"},
  {0x00001760, 0x0000177F, "TB_UNICODE_BLOCK_TAGBANWA"},
  {0x00001780, 0x000017FF, "TB_UNICODE_BLOCK_KHMER"},
  {0x00001800, 0x000018AF, "TB_UNICODE_BLOCK_MONGOLIAN"},
  {0x000018B0, 0x000018FF, "TB_UNICODE_BLOCK_UNIFIED_CANADIAN_ABORIGINAL_SYLLABICS_EXTENDED"},
  {0x00001900, 0x0000194F, "TB_UNICODE_BLOCK_LIMBU"},
  {0x00001950, 0x0000197F, "TB_UNICODE_BLOCK_TAI_LE"},
  {0x00001980, 0x000019DF, "TB_UNICODE_BLOCK_NEW_TAI_LUE"},
  {0x000019E0, 0x000019FF, "TB_UNICODE_BLOCK_KHMER_SYMBOLS"},
  {0x00001A00, 0x00001A1F, "TB_UNICODE_BLOCK_BUGINESE"},
  {0x00001A20, 0x00001AAF, "TB_UNICODE_BLOCK_TAI_THAM"},
  {0x00001B00, 0x00001B7F, "TB_UNICODE_BLOCK_BALINESE"},
  {0x00001B80, 0x00001BBF, "TB_UNICODE_BLOCK_SUNDANESE"},
  {0x00001BC0, 0x00001BFF, "TB_UNICODE_BLOCK_BATAK"},
  {0x00001C00, 0x00001C4F, "TB_UNICODE_BLOCK_LEPCHA"},
  {0x00001C50, 0x00001C7F, "TB_UNICODE_BLOCK_OL_CHIKI"},
  {0x00001CC0, 0x00001CCF, "TB_UNICODE_BLOCK_SUNDANESE_SUPPLEMENT"},
  {0x00001CD0, 0x00001CFF, "TB_UNICODE_BLOCK_VEDIC_EXTENSIONS"},
  {0x00001D00, 0x00001D7F, "TB_UNICODE_BLOCK_PHONETIC_EXTENSIONS"},
  {0x00001D80, 0x00001DBF, "TB_UNICODE_BLOCK_PHONETIC_EXTENSIONS_SUPPLEMENT"},
  {0x00001DC0, 0x00001DFF, "TB_UNICODE_BLOCK_COMBINING_DIACRITICAL_MARKS_SUPPLEMENT"},
  {0x00001E00, 0x00001EFF, "TB_UNICODE_BLOCK_LATIN_EXTENDED_ADDITIONAL"},
  {0x00001F00, 0x00001FFF, "TB_UNICODE_BLOCK_GREEK_EXTENDED"},
  {0x00002000, 0x0000206F, "TB_UNICODE_BLOCK_GENERAL_PUNCTUATION"},
  {0x00002070, 0x0000209F, "TB_UNICODE_BLOCK_SUPERSCRIPTS_AND_SUBSCRIPTS"},
  {0x000020A0, 0x000020CF, "TB_UNICODE_BLOCK_CURRENCY_SYMBOLS"},
  {0x000020D0, 0x000020FF, "TB_UNICODE_BLOCK_COMBINING_DIACRITICAL_MARKS_FOR_SYMBOLS"},
  {0x00002100, 0x0000214F, "TB_UNICODE_BLOCK_LETTERLIKE_SYMBOLS"},
  {0x00002150, 0x0000218F, "TB_UNICODE_BLOCK_NUMBER_FORMS"},
  {0x00002190, 0x000021FF, "TB_UNICODE_BLOCK_ARROWS"},
  {0x00002200, 0x000022FF, "TB_UNICODE_BLOCK_MATHEMATICAL_OPERATORS"},
  {0x00002300, 0x000023FF, "TB_UNICODE_BLOCK_MISCELLANEOUS_TECHNICAL"},
  {0x00002400, 0x0000243F, "TB_UNICODE_BLOCK_CONTROL_PICTURES"},
  {0x00002440, 0x0000245F, "TB_UNICODE_BLOCK_OPTICAL_CHARACTER_RECOGNITION"},
  {0x00002460, 0x000024FF, "TB_UNICODE_BLOCK_ENCLOSED_ALPHANUMERICS"},
  {0x00002500, 0x0000257F, "TB_UNICODE_BLOCK_BOX_DRAWING"},
  {0x00002580, 0x0000259F, "TB_UNICODE_BLOCK_BLOCK_ELEMENTS"},
  {0x000025A0, 0x000025FF, "TB_UNICODE_BLOCK_GEOMETRIC_SHAPES"},
  {0x00002600, 0x000026FF, "TB_UNICODE_BLOCK_MISCELLANEOUS_SYMBOLS"},
  {0x00002700, 0x000027BF, "TB_UNICODE_BLOCK_DINGBATS"},
  {0x000027C0, 0x000027EF, "TB_UNICODE_BLOCK_MISCELLANEOUS_MATHEMATICAL_SYMBOLS_A"},
  {0x000027F0, 0x000027FF, "TB_UNICODE_BLOCK_SUPPLEMENTAL_ARROWS_A"},
  {0x00002800, 0x000028FF, "TB_UNICODE_BLOCK_BRAILLE_PATTERNS"},
  {0x00002900, 0x0000297F, "TB_UNICODE_BLOCK_SUPPLEMENTAL_ARROWS_B"},
  {0x00002980, 0x000029FF, "TB_UNICODE_BLOCK_MISCELLANEOUS_MATHEMATICAL_SYMBOLS_B"},
  {0x00002A00, 0x00002AFF, "TB_UNICODE_BLOCK_SUPPLEMENTAL_MATHEMATICAL_OPERATORS"},
  {0x00002B00, 0x00002BFF, "TB_UNICODE_BLOCK_MISCELLANEOUS_SYMBOLS_AND_ARROWS"},
  {0x00002C00, 0x00002C5F, "TB_UNICODE_BLOCK_GLAGOLITIC"},
  {0x00002C60, 0x00002C7F, "TB_UNICODE_BLOCK_LATIN_EXTENDED_C"},
  {0x00002C80, 0x00002CFF, "TB_UNICODE_BLOCK_COPTIC"},
  {0x00002D00, 0x00002D2F, "TB_UNICODE_BLOCK_GEORGIAN_SUPPLEMENT"},
  {0x00002D30, 0x00002D7F, "TB_UNICODE_BLOCK_TIFINAGH"},
  {0x00002D80, 0x00002DDF, "TB_UNICODE_BLOCK_ETHIOPIC_EXTENDED"},
  {0x00002DE0, 0x00002DFF, "TB_UNICODE_BLOCK_CYRILLIC_EXTENDED_A"},
  {0x00002E00, 0x00002E7F, "TB_UNICODE_BLOCK_SUPPLEMENTAL_PUNCTUATION"},
  {0x00002E80, 0x00002EFF, "TB_UNICODE_BLOCK_CJK_RADICALS_SUPPLEMENT"},
  {0x00002F00, 0x00002FDF, "TB_UNICODE_BLOCK_KANGXI_RADICALS"},
  {0x00002FF0, 0x00002FFF, "TB_UNICODE_BLOCK_IDEOGRAPHIC_DESCRIPTION_CHARACTERS"},
  {0x00003000, 0x0000303F, "TB_UNICODE_BLOCK_CJK_SYMBOLS_AND_PUNCTUATION"},
  {0x00003040, 0x0000309F, "TB_UNICODE_BLOCK_HIRAGANA"},
  {0x000030A0, 0x000030FF, "TB_UNICODE_BLOCK_KATAKANA"},
  {0x00003100, 0x0000312F, "TB_UNICODE_BLOCK_BOPOMOFO"},
  {0x00003130, 0x0000318F, "TB_UNICODE_BLOCK_HANGUL_COMPATIBILITY_JAMO"},
  {0x00003190, 0x0000319F, "TB_UNICODE_BLOCK_KANBUN"},
  {0x000031A0, 0x000031BF, "TB_UNICODE_BLOCK_BOPOMOFO_EXTENDED"},
  {0x000031C0, 0x000031EF, "TB_UNICODE_BLOCK_CJK_STROKES"},
  {0x000031F0, 0x000031FF, "TB_UNICODE_BLOCK_KATAKANA_PHONETIC_EXTENSIONS"},
  {0x00003200, 0x000032FF, "TB_UNICODE_BLOCK_ENCLOSED_CJK_LETTERS_AND_MONTHS"},
  {0x00003300, 0x000033FF, "TB_UNICODE_BLOCK_CJK_COMPATIBILITY"},
  {0x00003400, 0x00004DBF, "TB_UNICODE_BLOCK_CJK_UNIFIED_IDEOGRAPHS_EXTENSION_A"},
  {0x00004DC0, 0x00004DFF, "TB_UNICODE_BLOCK_YIJING_HEXAGRAM_SYMBOLS"},
  {0x00004E00, 0x00009FFF, "TB_UNICODE_BLOCK_CJK_UNIFIED_IDEOGRAPHS"},
  {0x0000A000, 0x0000A48F, "TB_UNICODE_BLOCK_YI_SYLLABLES"},
  {0x0000A490, 0x0000A4CF, "TB_UNICODE_BLOCK_YI_RADICALS"},
  {0x0000A4D0, 0x0000A4FF, "TB_UNICODE_BLOCK_LISU"},
  {0x0000A500, 0x0000A63F, "TB_UNICODE_BLOCK_VAI"},
  {0x0000A640, 0x0000A69F, "TB_UNICODE_BLOCK_CYRILLIC_EXTENDED_B"},
  {0x0000A6A0, 0x0000A6FF, "TB_UNICODE_BLOCK_BAMUM"},
  {0x0000A700, 0x0000A71F, "TB_UNICODE_BLOCK_MODIFIER_TONE_LETTERS"},
  {0x0000A720, 0x0000A7FF, "TB_UNICODE_BLOCK_LATIN_EXTENDED_D"},
  {0x0000A800, 0x0000A82F, "TB_UNICODE_BLOCK_SYLOTI_NAGRI"},
  {0x0000A830, 0x0000A83F, "TB_UNICODE_BLOCK_COMMON_INDIC_NUMBER_FORMS"},
  {0x0000A840, 0x0000A87F, "TB_UNICODE_BLOCK_PHAGS_PA"},
  {0x0000A880, 0x0000A8DF, "TB_UNICODE_BLOCK_SAURASHTRA"},
  {0x0000A8E0, 0x0000A8FF, "TB_UNICODE_BLOCK_DEVANAGARI_EXTENDED"},
  {0x0000A900, 0x0000A92F, "TB_UNICODE_BLOCK_KAYAH_LI"},
  {0x0000A930, 0x0000A95F, "TB_UNICODE_BLOCK_REJANG"},
  {0x0000A960, 0x0000A97F, "TB_UNICODE_BLOCK_HANGUL_JAMO_EXTENDED_A"},
  {0x0000A980, 0x0000A9DF, "TB_UNICODE_BLOCK_JAVANESE"},
  {0x0000AA00, 0x0000AA5F, "TB_UNICODE_BLOCK_CHAM"},
  {0x0000AA60, 0x0000AA7F, "TB_UNICODE_BLOCK_MYANMAR_EXTENDED_A"},
  {0x0000AA80, 0x0000AADF, "TB_UNICODE_BLOCK_TAI_VIET"},
  {0x0000AAE0, 0x0000AAFF, "TB_UNICODE_BLOCK_MEETEI_MAYEK_EXTENSIONS"},
  {0x0000AB00, 0x0000AB2F, "TB_UNICODE_BLOCK_ETHIOPIC_EXTENDED_A"},
  {0x0000ABC0, 0x0000ABFF, "TB_UNICODE_BLOCK_MEETEI_MAYEK"},
  {0x0000AC00, 0x0000D7AF, "TB_UNICODE_BLOCK_HANGUL_SYLLABLES"},
  {0x0000D7B0, 0x0000D7FF, "TB_UNICODE_BLOCK_HANGUL_JAMO_EXTENDED_B"},
  {0x0000D800, 0x0000DB7F, "TB_UNICODE_BLOCK_HIGH_SURROGATES"},
  {0x0000DB80, 0x0000DBFF, "TB_UNICODE_BLOCK_HIGH_PRIVATE_USE_SURROGATES"},
  {0x0000DC00, 0x0000DFFF, "TB_UNICODE_BLOCK_LOW_SURROGATES"},
  {0x0000E000, 0x0000F8FF, "TB_UNICODE_BLOCK_PRIVATE_USE_AREA"},
  {0x0000F900, 0x0000FAFF, "TB_UNICODE_BLOCK_CJK_COMPATIBILITY_IDEOGRAPHS"},
  {0x0000FB00, 0x0000FB4F, "TB_UNICODE_BLOCK_ALPHABETIC_PRESENTATION_FORMS"},
  {0x0000FB50, 0x0000FDFF, "TB_UNICODE_BLOCK_ARABIC_PRESENTATION_FORMS_A"},
  {0x0000FE00, 0x0000FE0F, "TB_UNICODE_BLOCK_VARIATION_SELECTORS"},
  {0x0000FE10, 0x0000FE1F, "TB_UNICODE_BLOCK_VERTICAL_FORMS"},
  {0x0000FE20, 0x0000FE2F, "TB_UNICODE_BLOCK_COMBINING_HALF_MARKS"},
  {0x0000FE30, 0x0000FE4F, "TB_UNICODE_BLOCK_CJK_COMPATIBILITY_FORMS"},
  {0x0000FE50, 0x0000FE6F, "TB_UNICODE_BLOCK_SMALL_FORM_VARIANTS"},
  {0x0000FE70, 0x0000FEFF, "TB_UNICODE_BLOCK_ARABIC_PRESENTATION_FORMS_B"},
  {0x0000FF00, 0x0000FFEF, "TB_UNICODE_BLOCK_HALFWIDTH_AND_FULLWIDTH_FORMS"},
  {0x0000FFF0, 0x0000FFFF, "TB_UNICODE_BLOCK_SPECIALS"},
  
  {0x00010000, 0x0001007F, "TB_UNICODE_BLOCK_LINEAR_B_SYLLABARY"},
  {0x00010080, 0x000100FF, "TB_UNICODE_BLOCK_LINEAR_B_IDEOGRAMS"},
  {0x00010100, 0x0001013F, "TB_UNICODE_BLOCK_AEGEAN_NUMBERS"},
  {0x00010140, 0x0001018F, "TB_UNICODE_BLOCK_ANCIENT_GREEK_NUMBERS"},
  {0x00010190, 0x000101CF, "TB_UNICODE_BLOCK_ANCIENT_SYMBOLS"},
  {0x000101D0, 0x000101FF, "TB_UNICODE_BLOCK_PHAISTOS_DISC"},
  {0x00010280, 0x0001029F, "TB_UNICODE_BLOCK_LYCIAN"},
  {0x000102A0, 0x000102DF, "TB_UNICODE_BLOCK_CARIAN"},
  {0x00010300, 0x0001032F, "TB_UNICODE_BLOCK_OLD_ITALIC"},
  {0x00010330, 0x0001034F, "TB_UNICODE_BLOCK_GOTHIC"},
  {0x00010380, 0x0001039F, "TB_UNICODE_BLOCK_UGARITIC"},
  {0x000103A0, 0x000103DF, "TB_UNICODE_BLOCK_OLD_PERSIAN"},
  {0x00010400, 0x0001044F, "TB_UNICODE_BLOCK_DESERET"},
  {0x00010450, 0x0001047F, "TB_UNICODE_BLOCK_SHAVIAN"},
  {0x00010480, 0x000104AF, "TB_UNICODE_BLOCK_OSMANYA"},
  {0x00010800, 0x0001083F, "TB_UNICODE_BLOCK_CYPRIOT_SYLLABARY"},
  {0x00010840, 0x0001085F, "TB_UNICODE_BLOCK_IMPERIAL_ARAMAIC"},
  {0x00010900, 0x0001091F, "TB_UNICODE_BLOCK_PHOENICIAN"},
  {0x00010920, 0x0001093F, "TB_UNICODE_BLOCK_LYDIAN"},
  {0x00010980, 0x0001099F, "TB_UNICODE_BLOCK_MEROITIC_HIEROGLYPHS"},
  {0x000109A0, 0x000109FF, "TB_UNICODE_BLOCK_MEROITIC_CURSIVE"},
  {0x00010A00, 0x00010A5F, "TB_UNICODE_BLOCK_KHAROSHTHI"},
  {0x00010A60, 0x00010A7F, "TB_UNICODE_BLOCK_OLD_SOUTH_ARABIAN"},
  {0x00010B00, 0x00010B3F, "TB_UNICODE_BLOCK_AVESTAN"},
  {0x00010B40, 0x00010B5F, "TB_UNICODE_BLOCK_INSCRIPTIONAL_PARTHIAN"},
  {0x00010B60, 0x00010B7F, "TB_UNICODE_BLOCK_INSCRIPTIONAL_PAHLAVI"},
  {0x00010C00, 0x00010C4F, "TB_UNICODE_BLOCK_OLD_TURKIC"},
  {0x00010E60, 0x00010E7F, "TB_UNICODE_BLOCK_RUMI_NUMERAL_SYMBOLS"},
  {0x00011000, 0x0001107F, "TB_UNICODE_BLOCK_BRAHMI"},
  {0x00011080, 0x000110CF, "TB_UNICODE_BLOCK_KAITHI"},
  {0x000110D0, 0x000110FF, "TB_UNICODE_BLOCK_SORA_SOMPENG"},
  {0x00011100, 0x0001114F, "TB_UNICODE_BLOCK_CHAKMA"},
  {0x00011180, 0x000111DF, "TB_UNICODE_BLOCK_SHARADA"},
  {0x00011680, 0x000116CF, "TB_UNICODE_BLOCK_TAKRI"},
  {0x00012000, 0x000123FF, "TB_UNICODE_BLOCK_CUNEIFORM"},
  {0x00012400, 0x0001247F, "TB_UNICODE_BLOCK_CUNEIFORM_NUMBERS_AND_PUNCTUATION"},
  {0x00013000, 0x0001342F, "TB_UNICODE_BLOCK_EGYPTIAN_HIEROGLYPHS"},
  {0x00016800, 0x00016A3F, "TB_UNICODE_BLOCK_BAMUM_SUPPLEMENT"},
  {0x00016F00, 0x00016F9F, "TB_UNICODE_BLOCK_MIAO"},
  {0x0001B000, 0x0001B0FF, "TB_UNICODE_BLOCK_KANA_SUPPLEMENT"},
  {0x0001D000, 0x0001D0FF, "TB_UNICODE_BLOCK_BYZANTINE_MUSICAL_SYMBOLS"},
  {0x0001D100, 0x0001D1FF, "TB_UNICODE_BLOCK_MUSICAL_SYMBOLS"},
  {0x0001D200, 0x0001D24F, "TB_UNICODE_BLOCK_ANCIENT_GREEK_MUSICAL_NOTATION"},
  {0x0001D300, 0x0001D35F, "TB_UNICODE_BLOCK_TAI_XUAN_JING_SYMBOLS"},
  {0x0001D360, 0x0001D37F, "TB_UNICODE_BLOCK_COUNTING_ROD_NUMERALS"},
  {0x0001D400, 0x0001D7FF, "TB_UNICODE_BLOCK_MATHEMATICAL_ALPHANUMERIC_SYMBOLS"},
  {0x0001EE00, 0x0001EEFF, "TB_UNICODE_BLOCK_ARABIC_MATHEMATICAL_ALPHABETIC_SYMBOLS"},
  {0x0001F000, 0x0001F02F, "TB_UNICODE_BLOCK_MAHJONG_TILES"},
  {0x0001F030, 0x0001F09F, "TB_UNICODE_BLOCK_DOMINO_TILES"},
  {0x0001F0A0, 0x0001F0FF, "TB_UNICODE_BLOCK_PLAYING_CARDS"},
  {0x0001F100, 0x0001F1FF, "TB_UNICODE_BLOCK_ENCLOSED_ALPHANUMERIC_SUPPLEMENT"},
  {0x0001F200, 0x0001F2FF, "TB_UNICODE_BLOCK_ENCLOSED_IDEOGRAPHIC_SUPPLEMENT"},
  {0x0001F300, 0x0001F5FF, "TB_UNICODE_BLOCK_MISCELLANEOUS_SYMBOLS_AND_PICTOGRAPHS"},
  {0x0001F600, 0x0001F64F, "TB_UNICODE_BLOCK_EMOTICONS"},
  {0x0001F680, 0x0001F6FF, "TB_UNICODE_BLOCK_TRANSPORT_AND_MAP_SYMBOLS"},
  {0x0001F700, 0x0001F77F, "TB_UNICODE_BLOCK_ALCHEMICAL_SYMBOLS"},
  
  {0x00020000, 0x0002A6DF, "TB_UNICODE_BLOCK_CJK_UNIFIED_IDEOGRAPHS_EXTENSION_B"},
  {0x0002A700, 0x0002B73F, "TB_UNICODE_BLOCK_CJK_UNIFIED_IDEOGRAPHS_EXTENSION_C"},
  {0x0002B740, 0x0002B81F, "TB_UNICODE_BLOCK_CJK_UNIFIED_IDEOGRAPHS_EXTENSION_D"},
  {0x0002F800, 0x0002FA1F, "TB_UNICODE_BLOCK_CJK_COMPATIBILITY_IDEOGRAPHS_SUPPLEMENT"},
  
  {0x000E0000, 0x000E007F, "TB_UNICODE_BLOCK_TAGS"},
  {0x000E0100, 0x000E01EF, "TB_UNICODE_BLOCK_VARIATION_SELECTORS_SUPPLEMENT"},
};


@interface TBUnicodeBlock () {
  uc_block *_block;
}
@property (nonatomic, assign) uc_block *block;
@end


@implementation TBUnicodeBlock

- (NSUInteger)begin
{
  return _block->begin;
}

- (NSUInteger)end
{
  return _block->end;
}

- (NSString *)name
{
  return [[NSString alloc] initWithUTF8String:_block->name];
}


- (uc_block *)block
{
  return _block;
}

- (void)setBlock:(uc_block *)block
{
  _block = block;
}


- (id)initWithBlock:(uc_block *)block
{
  self = [super init];
  if (self) {
    _block = block;
  }
  return self;
}

+ (TBUnicodeBlock *)blockOfChar:(NSUInteger)c
{
  uc_uint count = [self blockCount];
  for ( uc_uint i=0; i<count; ++i ) {
    uc_block *iter = uc_block_list + i;
    if ( (iter->begin<=c) && (c<=iter->end) ) {
      return [[self alloc] initWithBlock:iter];
    }
  }
  return nil;
}

+ (TBUnicodeBlock *)blockForName:(NSString *)n
{
  if ( [n length]>0 ) {
    
    uc_string name = [n UTF8String];
    
    uc_uint count = [self blockCount];
    for ( uc_uint i=0; i<count; ++i ) {
      uc_block *iter = uc_block_list + i;
      if ( strcmp(iter->name, name)==0 ) {
        return [[self alloc] initWithBlock:iter];
      }
    }
    
  }
  return nil;
}


+ (NSArray *)blocks
{
  static NSArray *UnicodeBlocks = nil;
  static dispatch_once_t token;
  dispatch_once(&token, ^{
    NSMutableArray *array = [[NSMutableArray alloc] init];
    uc_uint count = [self blockCount];
    for ( uc_uint i=0; i<count; ++i ) {
      uc_block *iter = uc_block_list + i;
      id block = [[self alloc] initWithBlock:iter];
      [array addObject:block];
    }
    UnicodeBlocks = array;
  });
  return UnicodeBlocks;
}

+ (NSArray *)blockNames
{
  static NSArray *UnicodeBlockNames = nil;
  static dispatch_once_t token;
  dispatch_once(&token, ^{
    NSMutableArray *array = [[NSMutableArray alloc] init];
    uc_uint count = [self blockCount];
    for ( uc_uint i=0; i<count; ++i ) {
      uc_block *iter = uc_block_list + i;
      NSString *name = [[NSString alloc] initWithUTF8String:iter->name];
      [array addObject:name];
    }
    UnicodeBlockNames = array;
  });
  return UnicodeBlockNames;
}

+ (NSUInteger)blockCount
{
  return ( sizeof(uc_block_list) / sizeof(uc_block) );
}


- (BOOL)containsChar:(NSUInteger)c
{
  return ( (_block->begin<=c) && (c<=_block->end) );
}

- (NSUInteger)length
{
  return ( (_block->end+1) - _block->begin );
}


- (BOOL)isEqual:(id)object
{
  if ( !object ) {
    return NO;
  }
  
  if ( ![object isKindOfClass:[self class]] ) {
    return NO;
  }
  
  uc_block *block = [object block];
  
  return ((_block->begin==block->begin)
          && (_block->end==block->end)
          && (strcmp(_block->name, block->name)==0)
          );
}

- (NSString *)description
{
  return [[NSString alloc] initWithFormat:@"<%08X-%08X> %s", _block->begin, _block->end, _block->name];
}

@end

